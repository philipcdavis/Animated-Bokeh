<!DOCTYPE html>

<html>
<head>
    <title>d3 Bokeh</title>
    <style type="text/css">
        body {
            background-color: #344695;
            background: linear-gradient(135deg, #4177d3 0%,#344695 100%); /* W3C */
        }
        
    </style>
</head>

<body>

    <div id="svg"></div>
    
    
    
    <script src="d3.v3.min.js"></script>
    <script type="text/javascript">
        var width = 1000;
        var height = 900;
        var large = 85;
        var small = 35;
        var n = 25;
        
        var svg = d3.select("#svg")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        
        
        //Randomly generated nodes
        
        var nodes = d3.range(n).map(function() {
            return {
                x: width * Math.random(),
                y: height * Math.random(),
                dx: Math.random() / 2,
                dy: Math.random() / 2,
                r: (Math.random() * 35) + 40
              };
        })
        
        
        var fillScale = d3.scale.linear()
            .domain([40, 75])
            .range([0.9,0])
        
        var filter = svg.append("defs")
            .append("filter")
            .attr("id", "blur")
            .append("feGaussianBlur")
            .attr("stdDeviation", 0);
        
        var circles = svg.selectAll(".circles")
            .data(nodes)
            .enter()
            .append("circle")
            .attr("r", function(d) { return d.r})
            .attr("fill", "#d3fff5")
            .attr("fill-opacity", function(d){ return fillScale(d.r)})
            .attr("filter", "url(#blur)");
            
        
        d3.timer(function() {
        
        // Update the circle positions.
        circles
            .attr("cx", function(d) { 
                // Increase your tick
                d.x += d.dx;
                // Recycle your nodes
                if (d.x > width + large) {
                    d.x -= width + (large*2)
                } else if (d.x < -large) { 
                    d.x += width + (large*2)
                }
                return d.x; 
            })
            .attr("cy", function(d) {
                // Increase your tick
                d.y += d.dy;
                // Recycle your nodes
                if (d.y > height + large) { 
                    d.y -= height + (large*2)
                } else if (d.y < - large) {
                    d.y += height + (large*2)
                }
                return d.y; 
            });
        
        });
    </script>
</body>
</html>
